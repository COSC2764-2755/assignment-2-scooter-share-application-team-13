<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scooter Booking</title>
    <link rel="stylesheet" href="/static/css/engineer.css">
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <style>
        .scooter-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }
    </style>
</head>

<body>
<<<<<<< Updated upstream


    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
=======
    
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
>>>>>>> Stashed changes
        <h3 class="float-md-start mb-0">
            <img src="/static/images/logo.jpg" alt="ScootShare Logo" class="img-fluid" style="height: 50px;">
            ScootShare
        </h3>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
            aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                    <a class="nav-link" href="/">Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{{ url_for('site.login_view') }}">Login</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{{ url_for('site.register_view') }}">Register</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{{ url_for('site.dashboard_view') }}">Dashboard</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{{ url_for('site.report_issue') }}">Report Issue</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{{ url_for('site.submit_issue') }}">Report Issue</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/logout">Logout</a>
                </li>
            </ul>
        </div>
<<<<<<< Updated upstream
=======
    </nav>
    
>>>>>>> Stashed changes

        <div class="card-body">
            <h5 style="color: white;" class="card-title">Welcome, <span id="username"></span></h5>
            <p style="color: white;" class="card-text">Balance: $<span id="balance"></span></p>
        </div>
    </nav>

    <!-- Carousel Banner -->
    <style>
        .carousel-inner {
            height: 100%;
        }

        .carousel-image {
            height: 100%;
            object-fit: contain;
        }
    </style>

    <div class="carousel-container">
        <div id="carouselBanner" class="carousel slide" data-ride="carousel">
            <div class="carousel-inner">
                <div class="carousel-item active">
                    <img src="/static/images/banner5.png" class="d-block w-100 carousel-image" alt="Banner 1">
                </div>
                <div class="carousel-item">
                    <img src="/static/images/banner4.jpg" class="d-block w-100 carousel-image" alt="Banner 4">
                </div>
                <div class="carousel-item">
                    <img src="/static/images/banner1.png" class="d-block w-100 carousel-image" alt="Banner 5">
                </div>
                <div class="carousel-caption d-none d-md-block">
                    <h5>Latest Scooters</h5>
                    <p>Check out our latest additions!</p>
                </div>
            </div>
            <a class="carousel-control-prev" href="#carouselBanner" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#carouselBanner" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
            </a>
        </div>
    </div>

    <!-- Scooters List -->
    <div class="container mt-4">
        <div class="row">
            {% for scooter in available_scooters %}
            <div class="col-md-4">
                <div class="card">
                    <img src="{{ scooter.image_url }}" alt="Scooter Image" class="card-img-top scooter-image">
                    <div class="card-body">
                        <h5>Scooter ID: {{ scooter.id }}</h5>
                        <p>Status: {{ scooter.status }}</p>
                        <p>Make: {{ scooter.make }}</p>
                        <p>Color: {{ scooter.color }}</p>
                        <p>Location: {{ scooter.location }}</p>
                        <p>Power: {{ scooter.power }}</p>
                        <p>Cost: {{ scooter.cost }}</p>
                        <button class="btn btn-primary">Book</button>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            // Retrieve data from sessionStorage
            const username = sessionStorage.getItem('username');
            const user_type = sessionStorage.getItem('user_type');
            console.log(username)
            // Update username and balance if user_type is 'customer'
            if (user_type === 'customer') {
                // Retrieve balance from sessionStorage, or fetch it from the server
                let balance = sessionStorage.getItem('balance');
                if (balance === null) {
                    // Fetch balance from the server if not found in sessionStorage
                    fetch('/api/get_balance')
                        .then(response => response.json())
                        .then(data => {
                            balance = data.balance;
                            // Store balance in sessionStorage for future use
                            sessionStorage.setItem('balance', balance);
                            updateUI(username, balance);
                        })
                        .catch(error => console.error(error));
                } else {
                    // Balance found in sessionStorage, update the UI
                    updateUI(username, balance);
                }
            } else {
                // User is not a customer, update UI with just the username
                updateUI(username);
            }
        });

        function updateUI(username, balance) {
            // Update username
            const usernameElement = document.getElementById('username');
            usernameElement.textContent = username;

            // Update balance if available
            if (balance !== undefined) {
                const balanceElement = document.getElementById('balance');
                console.log("Updating balance:", balance);
                balanceElement.textContent = balance;
            }
        }
    </script>

<!-- Search for ride -->
<style>
    .step-container {
        border: 1px solid #e0e0e0;
        padding: 15px;
        border-radius: 5px;
    }
    
    .step-image img {
        max-width: 100%;
        height: auto;
    }
    
    .step-content {
        flex-grow: 1;
       
    }

    .padded-container {
    padding-top: 50px;  
    }

    footer {
        text-align: center;
        padding: 1rem 0;
        background-color: #2c3e50;
        color: #fff;
    }
</style>
    
<div class="container mt-5">
   
    <!-- Step 1: Search for ride -->
    <div class="step-container">
        <div class="row">
            <div class="col-md-2">
                <img src="/static/images/searchweb.webp" alt="Search for ride" width="100">
            </div>
            <div class="col-md-10">
                <h5>1. Search for ride</h5>
                <p>The user signs in to the app using their credentials and searches for nearby rides.</p>
            </div>
        </div>
    </div>

    <!-- Step 2: Scan code -->
    <div class="step-container">
        <div class="row">
            <div class="col-md-2">
                <img src="/static/images/scancode.webp" alt="Scan code" width="100">
            </div>
            <div class="col-md-10">
                <h5>2. Scan code</h5>
                <p>The user scans the barcode of the bike to unlock the ride.</p>
            </div>
        </div>
    </div>

    <!-- Step 3: Make payment -->
    <div class="step-container">
        <div class="row">
            <div class="col-md-2">
                <img src="/static/images/makepayment.webp" alt="Make payment" width="100">
            </div>
            <div class="col-md-10">
                <h5>3. Make payment</h5>
                <p>The user needs to select the preferred payment method and make an initial deposit payment.</p>
            </div>
        </div>
    </div>

        .step-image img {
            max-width: 100%;
            height: auto;
        }

        .step-content {
            flex-grow: 1;

        }

        .padded-container {
            padding-top: 50px;
        }

        footer {
            text-align: center;
            padding: 1rem 0;
            background-color: #6d6363;
            color: #fff;
        }
    </style>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>

</html>